$(document).ready(function(){$(".tabs").tabs()});var app=angular.module("myApp",["ngSanitize"]);function brackets_escape(e){return e=e&&(e=e.replace(/\(/,"\\(")).replace(/\)/,"\\)")}function brackets_count(e){return e.split(/\(.*?\)/).length-1}function line_breaks_conversion(e,t){return e=e&&e.replace(/[\r\n|\n|\r]/g,t)}function escapeHtml(e){return e=e&&(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#39;")}function rndStr(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function matchCount(e,t,n){return n.match(/g/)?(e.match(new RegExp(t,n))||[]).length:e.match(t)?1:0}function matchMethodGenerate(e,t,n){t=t||"";e='var str = "'+line_breaks_conversion(e=e||"","\\n")+'";\n';return e+='var regExp = new RegExp("'+t+'"',n&&(e+=', "'+n+'"'),e=(e+=");\n")+"var res = str.match(regExp);\n"+"console.log(res);"}function array_table(e){var n=(n=(n=(n=(n="")+'<table class="centered highlight striped">\n'+"   <thead>\n")+"   <tr>\n"+"       <th>key<th>\n")+"       <th>value<th>\n"+"   </tr>\n")+"   </thead>\n"+"   <tbody>\n";return $.each(e,function(e,t){n=(n=n+"   <tr>\n       <td>"+e+"<td>\n")+"       <td>"+t+"<td>\n   </tr>\n"}),n=n+"   </tbody>\n"+"</table>\n"}app.controller("myController",["$scope",function(e,t){var n=location.href,n=encodeURIComponent(n);e.encodeURL=n,e.$watchGroup(["sentence","regexp_text","regexpflg_g","regexpflg_i","regexpflg_m"],function(e,t,n){var a=e[0],r=e[1],c="";if(e[2]&&(c+="g"),e[3]&&(c+="i"),e[4]&&(c+="m"),n.match_method=matchMethodGenerate(a,r,c),a&&r){e="^"!=r&&"$"!=r?!0:!1;if(c.match(/g/)&&e){for(var s=new RegExp(r,c),l=[],o=0;m=s.exec(a);)l[o]=m.index,o++;var p=a.match(s),g="",h=0,i=($.each(l,function(e){l[e]!=h&&(g+=escapeHtml(a.substring(h,l[e])),h=l[e]),g=(g+='<span class="matched">')+escapeHtml(a.substr(h,p[e].length)),h+=p[e].length,g+="</span>"}),g+=escapeHtml(a.slice(h)),matchCount(a,r,c));n.match_count=i,n.view=line_breaks_conversion(g,"<br>"),n.message=""}else if(0<brackets_count(r)){for(var m,e=c+"g",s=new RegExp(r,c),u=new RegExp(r,e),l=[],o=0;m=u.exec(a);)l[o]=m.index,o++;p=a.match(s),g="",h=0,i=(l[0]==h||(g+=escapeHtml(a.substring(h,l[0])),h=l[0]),g=(g+='<span class="matched">')+escapeHtml(a.substr(h,p[0].length)),h+=p[0].length,g=(g+="</span>")+escapeHtml(a.slice(h)),p.length);n.match_count=i,n.view=line_breaks_conversion(g,"<br>"),n.message="※配列の0番目のみ表示しています"}else{e=0<brackets_count(r)?r:"("+brackets_escape(r)+")";var s=new RegExp(e,c),p=a.match(r,c),e=rndStr(),b=rndStr(),_=(g=escapeHtml(g=0<brackets_count(r)?(_=[],_=r.split(/\(.*?\)/),a.replace(s,_[0]+e+"$1"+b+_[1])):a.replace(s,e+"$1"+b)),new RegExp(e,"g")),e=new RegExp(b,"g"),i=(g=(g=g.replace(_,'<span class="matched">')).replace(e,"</span>"),matchCount(a,r,c));n.match_count=i,n.view=line_breaks_conversion(g,"<br>"),n.message=""}n.result=array_table(p)}else{g=escapeHtml(a);n.match_count=0,n.view=line_breaks_conversion(g,"<br>")}})}]);