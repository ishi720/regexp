$(document).ready(function(){$(".tabs").tabs()});var app=angular.module("myApp",["ngSanitize"]);function brackets_escape(e){return e?e=(e=e.replace(/\(/,"\\(")).replace(/\)/,"\\)"):e}function brackets_count(e){return e.split(/\(.*?\)/).length-1}function line_breaks_conversion(e,t){return e?e=e.replace(/[\r\n|\n|\r]/g,t):e}function escapeHtml(e){return e?e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#39;"):e}function rndStr(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function matchCount(e,t,n){return n.match(/g/)?(e.match(new RegExp(t,n))||[]).length:e.match(t)?1:0}function matchMethodGenerate(e,t,n){e||(e=""),t||(t="");var a='var str = "'+line_breaks_conversion(e,"\\n")+'";\n';return a+='var regExp = new RegExp("'+t+'"',n&&(a+=', "'+n+'"'),a+=");\n",a+="var res = str.match(regExp);\n",a+="console.log(res);"}function array_table(e){var n="";return n+='<table class="centered highlight striped">\n',n+="   <thead>\n",n+="   <tr>\n",n+="       <th>key<th>\n",n+="       <th>value<th>\n",n+="   </tr>\n",n+="   </thead>\n",n+="   <tbody>\n",$.each(e,function(e,t){n+="   <tr>\n",n+="       <td>"+e+"<td>\n",n+="       <td>"+t+"<td>\n",n+="   </tr>\n"}),n+="   </tbody>\n",n+="</table>\n"}app.controller("myController",["$scope",function(e,t){var n=location.href,a=encodeURIComponent(n);e.encodeURL=a,e.$watchGroup(["sentence","regexp_text","regexpflg_g","regexpflg_i","regexpflg_m"],function(e,t,n){var a=e[0],r=e[1],c="";if(e[2]&&(c+="g"),e[3]&&(c+="i"),e[4]&&(c+="m"),n.match_method=matchMethodGenerate(a,r,c),a&&r){var s=!0;if("^"!=r&&"$"!=r||(s=!1),c.match(/g/)&&s){for(var l=new RegExp(r,c),o=[],p=0;m=l.exec(a);)o[p]=m.index,p++;var i=a.match(l),g="",h=0;$.each(o,function(e){o[e]==h||(g+=escapeHtml(a.substring(h,o[e])),h=o[e]),g+='<span class="matched">',g+=escapeHtml(a.substr(h,i[e].length)),h+=i[e].length,g+="</span>"}),g+=escapeHtml(a.slice(h));var u=matchCount(a,r,c);n.matche_count=u,n.view=line_breaks_conversion(g,"<br>"),n.message="",n.result=array_table(i)}else if(0<brackets_count(r)){var m,b=c+"g",_=(l=new RegExp(r,c),new RegExp(r,b));for(o=[],p=0;m=_.exec(a);)o[p]=m.index,p++;i=a.match(l),g="",h=0;o[0]==h||(g+=escapeHtml(a.substring(h,o[0])),h=o[0]),g+='<span class="matched">',g+=escapeHtml(a.substr(h,i[0].length)),h+=i[0].length,g+="</span>",g+=escapeHtml(a.slice(h));u=i.length;n.matche_count=u,n.view=line_breaks_conversion(g,"<br>"),n.message="※配列の0番目のみ表示しています",n.result=array_table(i)}else{if(0<brackets_count(r))var v=r;else v="("+brackets_escape(r)+")";l=new RegExp(v,c),i=a.match(r,c);var d=rndStr(),f=rndStr();if(0<brackets_count(r)){var x;x=r.split(/\(.*?\)/);g=a.replace(l,x[0]+d+"$1"+f+x[1])}else g=a.replace(l,d+"$1"+f);g=escapeHtml(g);var k=new RegExp(d,"g"),w=new RegExp(f,"g");g=(g=g.replace(k,'<span class="matched">')).replace(w,"</span>");u=matchCount(a,r,c);n.matche_count=u,n.view=line_breaks_conversion(g,"<br>"),n.message="",n.result=array_table(i)}}else{g=escapeHtml(a);n.matche_count=0,n.view=line_breaks_conversion(g,"<br>")}})}]);